{"dependencies":[{"name":"./route","loc":{"line":13,"column":22}}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar route_1 = require(\"./route\");\nvar Base = /** @class */ (function () {\n    function Base() {\n        var _this = this;\n        this.routers = [];\n        this.applyRoutes = function (a) { return _this.routers.map(function (router) {\n            router.applyRoute(a);\n        }); };\n        this.addEvent = function () {\n            if (_this.routers.length) {\n                var links_1 = document.getElementsByClassName('router-link');\n                var _loop_1 = function (i) {\n                    links_1[i].onclick = function () { return _this.routers[0].changeRoute(links_1[i].href); };\n                };\n                for (var i = 0; i < links_1.length; i++) {\n                    _loop_1(i);\n                }\n            }\n            else\n                throw new Error('No Router Spacified');\n        };\n        window.onpopstate = function (a) {\n            _this.applyRoutes(a.target.location.pathname);\n        };\n        window.onpushstate = function (a) {\n            _this.applyRoutes(a.target.location.pathname);\n        };\n    }\n    return Base;\n}());\nexports.Base = Base;\nvar default_1 = /** @class */ (function (_super) {\n    __extends(default_1, _super);\n    function default_1(_a) {\n        var routes = _a.routes, appId = _a.appId;\n        var _this = _super.call(this) || this;\n        _this.routes = new Array();\n        _this.app = document.getElementById(appId);\n        if (!_this.app) {\n            _this.app = document.createElement('div');\n            _this.app.id = appId;\n            document.body.appendChild(_this.app);\n        }\n        // console.log(routes)\n        routes.map(function (a) {\n            _this.registerRoute(a.route, a.render);\n        });\n        _this.routers.push(_this);\n        _this.applyRoute(window.location.pathname);\n        _this.addEvent();\n        return _this;\n    }\n    //Here we use a somewhat different style of create the prototype\n    //than for the Route prototype. Both ways are valid. \n    //I'm using them mixed here, but It's probably wise not to do that.\n    //And stick to a single pattern. Here I'm doing it to show both possibilities\n    default_1.prototype.registerRoute = function (route, fn, paramObject) {\n        if (paramObject === void 0) { paramObject = { scope: undefined }; }\n        //We'll have route and function as named parameters\n        //and all the future optional parameters in a single object.\n        //Right now we just have scope as a optional parameters\n        var scope = paramObject && paramObject.scope || {};\n        return this.routes[this.routes.length] = new route_1[\"default\"]({\n            route: route,\n            fn: fn,\n            scope: scope\n        });\n    };\n    default_1.prototype.applyRoute = function (route) {\n        //iterate all routes\n        var matched = false;\n        // console.log(route)\n        for (var i = 0, j = this.routes.length; i < j; i++) {\n            var sRoute = this.routes[i];\n            //match route\n            if (sRoute.matches(route)) {\n                //if true call callback function with the proper scope\n                var html = sRoute.fn.apply(sRoute.scope, [sRoute.getArgumentsValues(route), history, route]);\n                this.app.innerHTML = html;\n                matched = true;\n                break;\n            }\n        }\n        if (!matched) {\n            this.app.innerHTML = '<h1>not found</h1>';\n            // console.log('nf')\n        }\n    };\n    default_1.prototype.changeRoute = function (r) {\n        r = r.split(window.location.origin).filter(function (a) { return a; })[0];\n        event.preventDefault();\n        this.applyRoutes(r);\n        history.pushState({}, r, r);\n        this.addEvent();\n        return false;\n    };\n    default_1.prototype.goBack = function () {\n        event.preventDefault();\n        history.back();\n        return false;\n    };\n    default_1.prototype.goForward = function () {\n        event.preventDefault();\n        history.forward();\n        return false;\n    };\n    return default_1;\n}(Base));\nexports[\"default\"] = default_1;\n"},"hash":"ef57909c26f791329c7d422d8261600d"}